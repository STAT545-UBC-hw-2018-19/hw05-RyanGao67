STAT 545A Homework 5
================
Tian Gao
2018/9/27

# Bring rectangular data in

``` r
## load gapminder
suppressPackageStartupMessages(library(gapminder))
## load tidyverse
suppressPackageStartupMessages(library(tidyverse))
## load forcats
suppressPackageStartupMessages(library(forcats))
## load plotly
suppressPackageStartupMessages(library(plotly))
suppressPackageStartupMessages(library(dplyr))
```

# Part 1: Factor management

  - Elaboration for the gapminder data set

  - Drop Oceania. Filter the Gapminder data to remove observations
    associated with the continent of Oceania. Additionally, remove
    unused factor levels. Provide concrete information on the data
    before and after removing these rows and Oceania; address the number
    of rows and the levels of the affected factors.

  - First let’s see the levels of gapminder.

<!-- end list -->

``` r
levels(gapminder$continent)
```

    ## [1] "Africa"   "Americas" "Asia"     "Europe"   "Oceania"

  - Then I’ll show the rows of a gapminder

<!-- end list -->

``` r
nrow(gapminder) 
```

    ## [1] 1704

  - Then let’s drop Ocania

<!-- end list -->

``` r
drop <- gapminder %>% 
  filter(continent %in%  c("Europe", "Africa", "Asia", "Americas"))
levels(drop$continent)
```

    ## [1] "Africa"   "Americas" "Asia"     "Europe"   "Oceania"

  - We can see that the continent of Oceania is unchanged. To fix this
    we need to use droplevels()

<!-- end list -->

``` r
dropped <- drop %>%
  droplevels()

levels(dropped$continent)
```

    ## [1] "Africa"   "Americas" "Asia"     "Europe"

  - Then I’ll address the number of rows and the levels of continent
    before and after removing Oceania.

<!-- end list -->

``` r
# before 
nrow(gapminder)
```

    ## [1] 1704

``` r
nlevels(gapminder$continent)
```

    ## [1] 5

``` r
# after
nrow(dropped)
```

    ## [1] 1680

``` r
nlevels(dropped$continent)
```

    ## [1] 4

  - From the above discussion, we can see that the number of rows before
    dropping Oceania is 1704 and the continent level is 5, the number of
    rows after dropping oceania is 1680 and continent level is 4.

  - Reorder the levels of country or continent. Use the forcats package
    to change the order of the factor levels, based on a principled
    summary of one of the quantitative variables. Consider experimenting
    with a summary statistic beyond the most basic choice of the median.

  - First of all let’s show the dropped gapminder

<!-- end list -->

``` r
dropped %>%
  head(15) %>%
  knitr::kable()
```

| country     | continent | year | lifeExp |      pop | gdpPercap |
| :---------- | :-------- | ---: | ------: | -------: | --------: |
| Afghanistan | Asia      | 1952 |  28.801 |  8425333 |  779.4453 |
| Afghanistan | Asia      | 1957 |  30.332 |  9240934 |  820.8530 |
| Afghanistan | Asia      | 1962 |  31.997 | 10267083 |  853.1007 |
| Afghanistan | Asia      | 1967 |  34.020 | 11537966 |  836.1971 |
| Afghanistan | Asia      | 1972 |  36.088 | 13079460 |  739.9811 |
| Afghanistan | Asia      | 1977 |  38.438 | 14880372 |  786.1134 |
| Afghanistan | Asia      | 1982 |  39.854 | 12881816 |  978.0114 |
| Afghanistan | Asia      | 1987 |  40.822 | 13867957 |  852.3959 |
| Afghanistan | Asia      | 1992 |  41.674 | 16317921 |  649.3414 |
| Afghanistan | Asia      | 1997 |  41.763 | 22227415 |  635.3414 |
| Afghanistan | Asia      | 2002 |  42.129 | 25268405 |  726.7341 |
| Afghanistan | Asia      | 2007 |  43.828 | 31889923 |  974.5803 |
| Albania     | Europe    | 1952 |  55.230 |  1282697 | 1601.0561 |
| Albania     | Europe    | 1957 |  59.280 |  1476505 | 1942.2842 |
| Albania     | Europe    | 1962 |  64.820 |  1728137 | 2312.8890 |

  - We can see that the data frame is ordered by country in alphabetical
    order.

# Part 2: File I/O

  - Experiment with one or more of write\_csv()/read\_csv() (and/or TSV
    friends), saveRDS()/readRDS(), dput()/dget(). Create something new,
    probably by filtering or grouped-summarization of Singer or
    Gapminder. I highly recommend you fiddle with the factor levels,
    i.e. make them non-alphabetical (see previous section). Explore
    whether this survives the round trip of writing to file then reading
    back in.

# Part 3: Visualization design

  - Remake at least one figure or create a new one, in light of
    something you learned in the recent class meetings about
    visualization design and color. Maybe juxtapose your first attempt
    and what you obtained after some time spent working on it. Reflect
    on the differences. If using Gapminder, you can use the country or
    continent color scheme that ships with Gapminder. Consult the
    dimensions listed in All the Graph Things.

  - Then, make a new graph by converting this visual (or another, if
    you’d like) to a plotly graph. What are some things that plotly
    makes possible, that are not possible with a regular ggplot2 graph?

# Part 4: Writing figures to file

Use ggsave() to explicitly save a plot to file. Then use to load and
embed it in your report. You can play around with various options, such
as:

  - Arguments of ggsave(), such as width, height, resolution or text
    scaling. Various graphics devices, e.g. a vector vs. raster format.
    Explicit provision of the plot object p via ggsave(…, plot = p).
    Show a situation in which this actually matters.
